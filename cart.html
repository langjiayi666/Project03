<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>购物车 - 小兔鲜儿</title>
    <link rel="stylesheet" type="text/css" href="css/common.css">
    <link rel="stylesheet" type="text/css" href="css/cart.css">
</head>
<body>
    <!-- 快捷导航栏 -->
    <div class="bar">
        <div class="wrapper">
            <ul>
                <li><a href="#">25计科专升本2班 浪佳怡 25216950207</a></li>
                <li><a href="index.html">返回首页</a></li>
                <li><a href="login.html">请先登录</a></li>
            </ul>
        </div>
    </div>

    <!-- 头部 -->
    <div class="header wrapper">
        <div class="logo">
            <h1><a href="index.html">小兔鲜儿</a></h1>
        </div>
        <div class="nav">
            <ul>
                <li><a href="index.html">首页</a></li>
                <li><a href="#">生鲜</a></li>
                <li><a href="#">美食</a></li>
            </ul>
        </div>
        <div class="car">
            <span>2</span>
        </div>
    </div>

    <!-- 购物车区域 -->
    <div class="cart-container">
        <div class="wrapper">
            <div class="cart-title">我的购物车</div>
            
            <!-- 购物车商品列表 -->
            <div id="cartItems">
                <!-- 这里会通过JavaScript动态生成商品 -->
                <div class="empty-cart" id="emptyCart">
                    <h3>购物车还是空的</h3>
                    <p>去首页逛逛，把喜欢的商品加入购物车吧</p>
                    <a href="index.html" style="color: #27ba9b;">去首页逛逛</a>
                </div>
            </div>
            
            <!-- 购物车汇总 -->
            <div class="cart-summary" id="cartSummary" style="display: none;">
                <div>共 <span id="totalCount">0</span> 件商品</div>
                <div class="total-price">合计：¥<span id="totalPrice">0.00</span></div>
                <button class="checkout-btn" onclick="goToCheckout()">去结算</button>
            </div>
        </div>
    </div>

    <!-- 底部 -->
    <div class="footer">
        <div class="wrapper">
            <div class="top">
                <ul>
                    <li><span>价格亲民</span></li>
                    <li><span>品质新鲜</span></li>
                    <li><span>物流快捷</span></li>
                </ul>
            </div>
            <div class="bottom">
                <p>
                    <a href="#">关于我们</a>|
                    <a href="#">帮助中心</a>|
                    <a href="#">售后服务</a>|
                    <a href="#">配送与验收</a>|
                    <a href="#">商务合作</a>|
                    <a href="#">搜索推荐</a>|
                    <a href="#">友情链接</a>
                </p>
                <p>CopyRight @ 小兔鲜儿</p>
            </div>
        </div>
    </div>

    <script>
        // 购物车数据
        const cartData = [
            {
                id: 1,
                name: '睿米无线吸尘器F8',
                image: './images/goods1.png',
                price: 899,
                quantity: 1
            },
            {
                id: 2,
                name: '紫檀外独板三层普洱茶盒',
                image: './images/goods3.png',
                price: 566,
                quantity: 1
            }
        ];
        
        // 页面加载时渲染购物车
        window.onload = function() {
            renderCart();
        };
        
        // 渲染购物车
        function renderCart() {
            const cartItems = document.getElementById('cartItems');
            const emptyCart = document.getElementById('emptyCart');
            const cartSummary = document.getElementById('cartSummary');
            
            if (cartData.length === 0) {
                emptyCart.style.display = 'block';
                cartSummary.style.display = 'none';
                return;
            }
            
            emptyCart.style.display = 'none';
            cartSummary.style.display = 'block';
            
            // 生成商品列表
            let html = '';
            let total = 0;
            let totalCount = 0;
            
            cartData.forEach(item => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                totalCount += item.quantity;
                
                html += `
                <div class="cart-item" data-id="${item.id}">
                    <img src="${item.image}" alt="${item.name}">
                    <div class="cart-item-info">
                        <div class="cart-item-name">${item.name}</div>
                        <div class="cart-item-price">¥${item.price}</div>
                    </div>
                    <div class="cart-item-quantity">
                        <button class="quantity-btn" onclick="changeQuantity(${item.id}, -1)">-</button>
                        <input class="quantity-input" type="text" value="${item.quantity}" 
                               onchange="updateQuantity(${item.id}, this.value)">
                        <button class="quantity-btn" onclick="changeQuantity(${item.id}, 1)">+</button>
                    </div>
                    <div class="cart-item-total">¥${itemTotal}</div>
                    <button onclick="removeItem(${item.id})" style="margin-left: 20px; color: #999;">删除</button>
                </div>
                `;
            });
            
            cartItems.innerHTML = html;
            
            // 更新汇总
            document.getElementById('totalCount').textContent = totalCount;
            document.getElementById('totalPrice').textContent = total.toFixed(2);
        }
        
        // 改变数量
        function changeQuantity(id, delta) {
            const item = cartData.find(item => item.id === id);
            if (item) {
                item.quantity += delta;
                if (item.quantity < 1) item.quantity = 1;
                renderCart();
            }
        }
        
        // 更新数量
        function updateQuantity(id, value) {
            const quantity = parseInt(value);
            const item = cartData.find(item => item.id === id);
            if (item && quantity > 0) {
                item.quantity = quantity;
                renderCart();
            }
        }
        
        // 删除商品
        function removeItem(id) {
            if (confirm('确定要删除这个商品吗？')) {
                const index = cartData.findIndex(item => item.id === id);
                if (index > -1) {
                    cartData.splice(index, 1);
                    renderCart();
                }
            }
        }
        
        // 去结算
        function goToCheckout() {
            // 保存购物车数据到临时存储，供结算页面使用
            localStorage.setItem('cartForOrder', JSON.stringify(cartData));
            localStorage.setItem('orderTotal', document.getElementById('totalPrice').textContent);
            window.location.href = 'checkout.html';
        }
    </script>
    <div class="cart-summary" id="cartSummary" style="display: none;">
    <div>共 <span id="totalCount">0</span> 件商品</div>
    <div class="total-price">合计：¥<span id="totalPrice">0.00</span></div>
    <button class="checkout-btn" onclick="goToCheckout()">去结算</button>
</div>
</body>
</html>